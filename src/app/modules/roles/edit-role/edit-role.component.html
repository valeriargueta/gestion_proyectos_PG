<div class="flex flex-col flex-auto">
  <!-- Header -->
  <div
    class="flex flex-row sm:flex-row items-start sm:items-center sm:justify-between p-6 sm:py-12 md:px-8 border-b bg-card dark:bg-transparent"
  >
    <!-- Title -->
    <div>
      <div class="text-4xl font-extrabold tracking-tight leading-none">
        {{ "ROLES.EDIT_ROLE" | transloco }}
      </div>
    </div>
  </div>
  <div class="mt-6 mx-10 bg-card rounded-2xl shadow p-4">
    <form [formGroup]="form">
      <div>
        <mat-form-field color="primary" class="w-1/4">
          <mat-label class="font-semibold">{{
            "ROLES.FORM.NAME" | transloco
          }}</mat-label>
          <input formControlName="name" matInput required="true" />
        </mat-form-field>
      </div>
      <br />
      <ng-container>
        <mat-label class="font-semibold">{{
          "ROLES.FORM.PERMISSIONS" | transloco
        }}*</mat-label>
        <app-data-tree
          [nodeData]="permissionsBS"
          [dataDefault]="preSelectedPermissions"
          (treeNodesSelected)="getSelectedPermissions($event)"
        ></app-data-tree>
      </ng-container>
      <div class="form-row mt-6 flex justify-end">
        <button
          class="w-fit mr-3"
          mat-stroked-button
          type="button"
          (click)="redirectToIndex()"
        >
          {{ "ROLES.FORM.CANCEL" | transloco }}
        </button>
        <button
          color="primary"
          type="submit"
          (click)="updateRole()"
          [disabled]="!form.valid || !canEditRole || selectedPermissions.length == 0"
          class="w-auto"
          mat-raised-button
        >
          {{ "ROLES.FORM.SUBMIT" | transloco }}
        </button>
      </div>
    </form>
  </div>
</div>
